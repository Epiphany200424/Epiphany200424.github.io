<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>SpringBoot2自动配置入门 | Hexo</title>
  <meta name="description" content="SpringBoot特点依赖管理 父项目做依赖管理 1234567891011121314151617依赖管理 &lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;&lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;&lt;version&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot2自动配置入门">
<meta property="og:url" content="http://example.com/2022/10/28/SpringBoot2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="SpringBoot特点依赖管理 父项目做依赖管理 1234567891011121314151617依赖管理 &lt;parent&gt;&lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;&lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;&lt;version&amp;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666841212807-75f7d5a5-3593-4c27-9310-a8dac1a6e962.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=ua5a1a37a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=544&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=146760&status=done&style=none&taskId=u745bc29a-3741-47b5-b614-484712aa085&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626268527765-d5dff7d8-1e47-4126-9e2c-9a77b57edd8a.png#crop=0&crop=0&crop=1&crop=1&from=url&id=OrRYX&margin=%5Bobject%20Object%5D&originHeight=713&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666868752103-b95602c0-6ddb-46dc-8c80-23b65ea161d0.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=217&id=uc2672127&margin=%5Bobject%20Object%5D&name=image.png&originHeight=271&originWidth=1214&originalType=binary&ratio=1&rotation=0&showTitle=false&size=47272&status=done&style=none&taskId=u9600d8b6-cd5e-489a-b81f-ac0525476ec&title=&width=971.2">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666868858807-01c7f193-ca9c-4b6d-ab05-879690240ed8.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=188&id=u9efd27a9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=235&originWidth=1034&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35314&status=done&style=none&taskId=u70083e45-2b2e-442c-ae46-eb552c47663&title=&width=827.2">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666868936795-08885f76-27b8-41a0-9b7d-a300949a1513.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=586&id=u4aab18c2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=733&originWidth=592&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28382&status=done&style=none&taskId=u776a31e3-4fc1-449e-a374-adc28474447&title=&width=473.6">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666870466531-88370e94-d364-4e5c-8da7-312ed4cfb7b5.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=266&id=u5802faf9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=333&originWidth=1171&originalType=binary&ratio=1&rotation=0&showTitle=false&size=62035&status=done&style=none&taskId=ue30dd796-b54e-46c1-9fb2-871379862fc&title=&width=936.8">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666870879393-d3d98aed-7148-4f7e-8dcd-b4d6007208e6.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=300&id=u130a2b42&margin=%5Bobject%20Object%5D&name=image.png&originHeight=375&originWidth=1274&originalType=binary&ratio=1&rotation=0&showTitle=false&size=119746&status=done&style=none&taskId=u18710aa1-471d-42ce-ba56-12a02ba6f1a&title=&width=1019.2">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871008030-1bd72b83-8090-4539-afcb-122a5713457e.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=387&id=u8fe69615&margin=%5Bobject%20Object%5D&name=image.png&originHeight=484&originWidth=1221&originalType=binary&ratio=1&rotation=0&showTitle=false&size=120042&status=done&style=none&taskId=u76384ddf-efb6-4420-b150-ec924f83b24&title=&width=976.8">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871259108-229a1631-e51f-48ec-82ad-34bb44b5d1bb.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=312&id=u702497de&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1252&originalType=binary&ratio=1&rotation=0&showTitle=false&size=113404&status=done&style=none&taskId=ue38002c5-9ae9-495e-af66-728e17856d1&title=&width=1001.6">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871350226-8ba0618f-bc71-41e0-88d7-d48b563026ab.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=304&id=u5a019c5f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=380&originWidth=1266&originalType=binary&ratio=1&rotation=0&showTitle=false&size=99365&status=done&style=none&taskId=uc6e1e54e-35cf-439a-a909-95a1b2da080&title=&width=1012.8">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871465110-5af13936-fc02-4f51-b55f-4f9f088a4a43.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=630&id=ua1a4048b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=788&originWidth=1613&originalType=binary&ratio=1&rotation=0&showTitle=false&size=252590&status=done&style=none&taskId=u8cf06abe-60d9-47e6-a997-20c197fa576&title=&width=1290.4">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666911522276-34b784fa-0006-4a15-96eb-e3c568e1f81f.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=182&id=u4b6c5cc2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=228&originWidth=1016&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33305&status=done&style=none&taskId=u20af8b8f-e050-4bb0-9d88-ea7293dde9f&title=&width=812.8">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666915986334-1305b95c-e17a-4d20-a33a-d7ee464bc7ca.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=413&id=u6053a2f9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=794&originWidth=1485&originalType=binary&ratio=1&rotation=0&showTitle=false&size=205073&status=done&style=none&taskId=u94598d01-e404-43c0-a327-2f3ce58147c&title=&width=773">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666919619649-a9b5d9ad-171d-4580-be55-8e8f983dc7e0.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=41&id=ud917beb6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=51&originWidth=817&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11483&status=done&style=none&taskId=u8b3d7f34-d0e1-4dd1-81f8-31a7828a7c0&title=&width=653.6">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666919663152-81f7e254-3d99-458b-a729-b13a3fc35b9a.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=504&id=u61270335&margin=%5Bobject%20Object%5D&name=image.png&originHeight=630&originWidth=1179&originalType=binary&ratio=1&rotation=0&showTitle=false&size=106589&status=done&style=none&taskId=u41ce6d89-16ed-43fe-b399-09c3b7fec6e&title=&width=943.2">
<meta property="article:published_time" content="2022-10-28T07:37:42.000Z">
<meta property="article:modified_time" content="2022-10-28T10:39:51.018Z">
<meta property="article:author" content="Epiphany">
<meta property="article:tag" content="Spring Boot">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666841212807-75f7d5a5-3593-4c27-9310-a8dac1a6e962.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=ua5a1a37a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=544&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=146760&status=done&style=none&taskId=u745bc29a-3741-47b5-b614-484712aa085&title=">
  <!-- Canonical links -->
  <link rel="canonical" href="http://example.com/2022/10/28/SpringBoot2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%85%A5%E9%97%A8/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
    <link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet">
  
  
<meta name="generator" content="Hexo 6.3.0"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/cofess" target="_blank">
          <img class="img-circle img-rotate" src="/images/20221028171523.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Epiphany</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Web Developer &amp; Designer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle=tooltip data-placement=top><i class="icon icon-behance"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Boot/">Spring Boot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Boot/" rel="tag">Spring Boot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/" rel="tag">知识点</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/Spring-Boot/" style="font-size: 14px;">Spring Boot</a> <a href="/tags/java/" style="font-size: 13px;">java</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/" style="font-size: 13px;">知识点</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Spring-Boot/">Spring Boot</a>
              </p>
              <p class="item-title">
                <a href="/2022/10/28/Spring%20Boot%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="title">Spring Boot 配置文件</a>
              </p>
              <p class="item-date">
                <time datetime="2022-10-28T09:12:49.134Z" itemprop="datePublished">2022-10-28</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/java/">java</a>
              </p>
              <p class="item-title">
                <a href="/2022/10/28/SpringBoot2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%85%A5%E9%97%A8/" class="title">SpringBoot2自动配置入门</a>
              </p>
              <p class="item-date">
                <time datetime="2022-10-28T07:37:42.000Z" itemprop="datePublished">2022-10-28</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
  <aside class="sidebar sidebar-toc collapse   in  " id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot%E7%89%B9%E7%82%B9"><span class="toc-number">1.</span> <span class="toc-text">SpringBoot特点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86"><span class="toc-number">1.0.1.</span> <span class="toc-text">依赖管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">1.0.2.</span> <span class="toc-text">自动配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%8A%9F%E8%83%BD"><span class="toc-number">2.</span> <span class="toc-text">容器功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%B7%BB%E5%8A%A0"><span class="toc-number">2.1.</span> <span class="toc-text">组件添加</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Configuration"><span class="toc-number">2.1.1.</span> <span class="toc-text">@Configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E3%80%81-Component%E3%80%81-Controller%E3%80%81-Service%E3%80%81-Repository"><span class="toc-number">2.1.2.</span> <span class="toc-text">@Bean、@Component、@Controller、@Service、@Repository</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Import"><span class="toc-number">2.1.3.</span> <span class="toc-text">@Import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Conditional"><span class="toc-number">2.1.4.</span> <span class="toc-text">4.@Conditional</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E7%94%9F%E9%85%8D%E7%BD%AE-xml-%E5%AF%BC%E5%85%A5"><span class="toc-number">2.2.</span> <span class="toc-text">原生配置(xml)导入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ImportResource"><span class="toc-number">2.2.1.</span> <span class="toc-text">@ImportResource</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">2.3.</span> <span class="toc-text">配置绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ConfigurationProperties-Component"><span class="toc-number">2.3.1.</span> <span class="toc-text">@ConfigurationProperties + @Component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EnableConfigurationProperties-ConfigurationProperties"><span class="toc-number">2.3.2.</span> <span class="toc-text">@EnableConfigurationProperties + @ConfigurationProperties</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%85%A5%E9%97%A8"><span class="toc-number">3.</span> <span class="toc-text">自动配置入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%AF%BC%E5%8A%A0%E8%BD%BD%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-number">3.1.</span> <span class="toc-text">引导加载自动配置类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBootConfiguration-SpringBoot%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.1.</span> <span class="toc-text">@SpringBootConfiguration(SpringBoot配置)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ComponentScan-%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F"><span class="toc-number">3.1.2.</span> <span class="toc-text">@ComponentScan(组件扫描)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EnableAutoConfiguration-%E5%90%AF%E7%94%A8%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.3.</span> <span class="toc-text">@EnableAutoConfiguration(启用自动配置)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AutoConfigurationPackage"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">@AutoConfigurationPackage</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Import-AutoConfigurationImportSelector-class"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">@Import(AutoConfigurationImportSelector.class)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%80%E5%A7%8B%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">3.2.</span> <span class="toc-text">按需开始自动配置项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">3.3.</span> <span class="toc-text">修改默认配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">3.4.</span> <span class="toc-text">最佳实践</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-number">4.</span> <span class="toc-text">简化开发</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="_posts-SpringBoot2自动配置入门" class="article article-type-_posts" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      SpringBoot2自动配置入门
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2022/10/28/SpringBoot2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%85%A5%E9%97%A8/" class="article-date">
	  <time datetime="2022-10-28T07:37:42.000Z" itemprop="datePublished">2022-10-28</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/java/">java</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/Spring-Boot/" rel="tag">Spring Boot</a>, <a class="article-tag-link-link" href="/tags/java/" rel="tag">java</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2022/10/28/SpringBoot2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%85%A5%E9%97%A8/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 4.6k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 20(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="SpringBoot特点"><a href="#SpringBoot特点" class="headerlink" title="SpringBoot特点"></a>SpringBoot特点</h1><h3 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h3><ul>
<li><p>父项目做依赖管理</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">依赖管理 </span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">他的父项目</span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">几乎声明了所有开发中常用的依赖的版本号,自动版本仲裁机制</span><br></pre></td></tr></table></figure>
</li>
<li><p>开发导入starter场景启动器</p>
</li>
</ul>
<p>官网说明: <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1、见到很多 spring-boot-starter-* ： *就某种场景</span><br><span class="line">2、只要引入starter，这个场景的所有常规需要的依赖我们都自动引入</span><br><span class="line">3、SpringBoot所有支持的场景</span><br><span class="line">https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter</span><br><span class="line">4、见到的 *-spring-boot-starter： 第三方为我们提供的简化开发的场景启动器。</span><br><span class="line">5、所有场景启动器最底层的依赖</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>无需关注版本号，自动版本仲裁</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、引入依赖默认都可以不写版本</span><br><span class="line">2、引入非版本仲裁的jar，要写版本号。</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以修改默认版本号</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、查看spring-boot-dependencies里面规定当前依赖的版本 用的 key。</span><br><span class="line">2、在当前项目里面重写配置</span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="自动配置"><a href="#自动配置" class="headerlink" title="自动配置"></a>自动配置</h3><ul>
<li><p>自动配置好的tomcat</p>
<ul>
<li>引入tomcat依赖</li>
<li>配置tomcat<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>自动配置好的SpringMVC</p>
<ul>
<li>引入SpringMVC全套组件 </li>
<li>自动配好SpringMVC常用组件（功能）</li>
</ul>
</li>
</ul>
<p>例如：  前端控制器DispatcherServlet：拦截所有的前端的请求；<br>               字符编码characterEncodingFilter：解决返回中文字符串乱码问题；<br>               视图解析器viewResolver：对返回的视图进行渲染呈现；<br>                文件上传解析器multipatResolver：文件上传；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">//1. 返回IOC容器</span></span><br><span class="line">       <span class="type">ConfigurableApplicationContext</span> <span class="variable">run</span> <span class="operator">=</span> SpringApplication.run(ManApplication.class, args);</span><br><span class="line">       <span class="comment">//2. 查看容器中的组件</span></span><br><span class="line">       String[] names = run.getBeanDefinitionNames();</span><br><span class="line">       <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">           System.out.println(Arrays.toString(names));</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>自动配好web常见的功能，如字符编码问题</p>
<ul>
<li>Spring Boot 帮我们配置好了所有web开发时需要的场景</li>
</ul>
</li>
<li><p>默认包结构</p>
<ul>
<li>主程序所在的包都会被及其下边的所有子包里面的组件都会被扫描进来</li>
<li>无需以前的包扫描配置</li>
<li>如果想要改变扫描路径,那就可以使用 主程序上的注解 <em>@</em><strong>SpringBootApplication(scanBasePackages &#x3D; “需要扫描包的路径”)</strong><ul>
<li>或者也可以 使用 注解 **@ComponentScan **扫描路径<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span> 注解等同于下面三个注解</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;指定的包扫描路径&quot;&#125;)</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>各种配置拥有默认值</p>
<ul>
<li>默认配置最终都是映射到某一个类上的 xxxProperties .java文件中</li>
<li>配置文件的值最终会绑定到某个类上。这个类会在容器中有创建对象</li>
</ul>
</li>
<li><p>按需加载所有自动配置项</p>
<ul>
<li>非常多的starter</li>
<li>引入了哪些场景这个场景的自动配置才会开启</li>
<li>Spring Boot 所有的自动配置功能都在spring-boot-autoconfigure包中<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>…..</p>
</li>
</ul>
<h1 id="容器功能"><a href="#容器功能" class="headerlink" title="容器功能"></a>容器功能</h1><h2 id="组件添加"><a href="#组件添加" class="headerlink" title="组件添加"></a>组件添加</h2><h3 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h3><p> 可以理解为一个Configuration就是对应的一个Spring的xml版的容器<br>当@Configuration使用在类上时 注解中的属性 proxyBeanMethods 属性默认会为 true，则组件默认会为单例模式的 简单来说就是</p>
<blockquote>
<p>proxyBeanMethods属性默认值是true,也就是说该配置类会被代理（<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=CGLIB&spm=1001.2101.3001.7020">CGLIB</a>），在同一个配置文件中调用其它被@Bean注解标注的方法获取对象时会直接从IOC容器之中获取, 也开始单例模式；<br>注解的意思是proxyBeanMethods配置类是用来指定@Bean注解标注的方法是否使用代理，默认是true使用代理，直接从IOC容器之中取得对象；如果设置为false,也就是不使用注解，每次调用@Bean标注的方法获取到的对象和IOC容器中的都不一样，是一个新的对象，所以我们可以将此属性设置为false来提高性能；</p>
</blockquote>
<p>Full 模式 和  Lite 模式 的区别<br>   Full 全配置(proxyBeanMethods &#x3D; true )<br>保证每个@Bean方法被调用多少次返回的组件都是单实例的<br>  Lite 轻量级配置 (proxyBeanMethods &#x3D; false)<br>每个@Bean方法被调用多少次返回的组件都是新创建的<br>配置 类组件之间无依赖关系用Lite模式加速容器启动过程，减少判断<br>配置类组件之间有依赖关系，方法会被调用得到之前单实例组件，用Full模式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#############################Configuration使用示例######################################################</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 陶广</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Configuration</span> 告诉SpringBoot这是一个配置类 == ssm中的配置文件</span></span><br><span class="line"><span class="comment"> * 1. 使用<span class="doctag">@Bean</span>注解在方法上，在IOC容器中提供配置类方式祖册的组件默认都是单例模式</span></span><br><span class="line"><span class="comment"> * 2. 被 <span class="doctag">@Configuration</span>注解的类也会在SpringBoot中成为一个组件</span></span><br><span class="line"><span class="comment"> * 3. proxyBeanMethods属性:代理bean的方法</span></span><br><span class="line"><span class="comment"> *      Full(全配置 proxyBeanMethods = true ) [保证每个<span class="doctag">@Bean</span>方法被调用多少次返回的组件都是单实例的]、</span></span><br><span class="line"><span class="comment"> *      Lite(轻量级配置 proxyBeanMethods = false) [每个<span class="doctag">@Bean</span>方法被调用多少次返回的组件都是新创建的]</span></span><br><span class="line"><span class="comment"> *      组件依赖必须使用Full模式默认。其他默认是否Lite模式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 给容器中添加组件，以方法名作为组件的id，返回值就是组件类型，方法返回的对象就相当于在IOC容器中的实例</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean()</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">zhangsan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">//这里user组件依赖了pet组件</span></span><br><span class="line">        zhangsan.setPet(pet());</span><br><span class="line">        <span class="keyword">return</span> zhangsan;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;tomcat&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Pet <span class="title function_">pet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pet</span>(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">#############################Configuration测试代码######################################################</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 主程序类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@SpringBootApplication</span> 告诉SpringBoot这是一个SpringBoot应用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//@SpringBootApplication(scanBasePackages = &quot;com.tao&quot;)</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.tao&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1. 返回IOC容器</span></span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">run</span> <span class="operator">=</span> SpringApplication.run(ManApplication.class, args);</span><br><span class="line">        <span class="comment">//2. 查看容器中的组件</span></span><br><span class="line"><span class="comment">//        String[] names = run.getBeanDefinitionNames();</span></span><br><span class="line"><span class="comment">//        for (String name : names) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(Arrays.toString(names));</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//3. 从容器中获取组件,在IOC容器中提供配置类方式祖册的组件默认都是单例模式</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user01</span> <span class="operator">=</span> run.getBean(<span class="string">&quot;user01&quot;</span>,User.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user02</span> <span class="operator">=</span> run.getBean(<span class="string">&quot;user01&quot;</span>,User.class);</span><br><span class="line">        System.out.println(user01 == user02);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. com.tao.boot.config.MyConfig$$EnhancerBySpringCGLIB$$7cdb6c6c@648ee871</span></span><br><span class="line">        <span class="type">MyConfig</span> <span class="variable">bean</span> <span class="operator">=</span> run.getBean(MyConfig.class);</span><br><span class="line">        System.out.println(bean);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. 如果 @Configuration 注解 的 属性 proxyBeanMethods = true 则SpringBoot总会检查这个组件是否在IOC容器中存在</span></span><br><span class="line">        <span class="comment">//存在则不会创建新的对象,会使用之前的对象,保持单例模式</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> bean.user01();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> bean.user01();</span><br><span class="line">        System.out.println(user == user1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.如果 组件 为 Lite模式 则 组件之间的依赖时不会相等的 </span></span><br><span class="line">        <span class="comment">//为Full模式之间之间的依赖会相等</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">bean1</span> <span class="operator">=</span> run.getBean(User.class);</span><br><span class="line">        <span class="type">Pet</span> <span class="variable">pet</span> <span class="operator">=</span> run.getBean(Pet.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;组件依赖是否相等&quot;</span> + (bean1.getPet() == pet));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Bean、-Component、-Controller、-Service、-Repository"><a href="#Bean、-Component、-Controller、-Service、-Repository" class="headerlink" title="@Bean、@Component、@Controller、@Service、@Repository"></a>@Bean、@Component、@Controller、@Service、@Repository</h3><h3 id="Import"><a href="#Import" class="headerlink" title="@Import"></a>@Import</h3><p>导入装配：将需要的注册的bean对象组件注入(必须全名)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;User.class, DBHelper.class&#125;)</span></span><br><span class="line"><span class="comment">//给容器中自动创建出这两个类型的组件、默认组件的名字就是全类名</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Import(&#123;User.class, DBHelper.class&#125;)</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span> <span class="comment">//告诉SpringBoot这是一个配置类 == 配置文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-Conditional"><a href="#4-Conditional" class="headerlink" title="4.@Conditional"></a>4.@Conditional</h3><p>条件装配：满足Conditional指定的条件，则进行组件注入<br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666841212807-75f7d5a5-3593-4c27-9310-a8dac1a6e962.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=drop&id=ua5a1a37a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=544&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=146760&status=done&style=none&taskId=u745bc29a-3741-47b5-b614-484712aa085&title=" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#############################Conditional使用示例######################################################</span><br><span class="line"><span class="meta">@Import(&#123;DBHelper.class&#125;)</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = true)</span></span><br><span class="line"><span class="comment">//@ConditionalOnBean(name = &quot;user01&quot;) //当IOC容器中有 名为 user01 的组件时则 创建该组件</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = &quot;user01&quot;)</span><span class="comment">//当IOC容器中没有 名为 user01 的组件时则 创建该组件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;tomcat&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Pet <span class="title function_">pet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pet</span>(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 给容器中添加组件，以方法名作为组件的id，返回值就是组件类型，方法返回的对象就相当于在IOC容器中的实例</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ConditionalOnBean(name = &quot;tomcat&quot;)</span></span><br><span class="line">    <span class="meta">@Bean(&quot;user01&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">zhangsan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">//这里user组件依赖了pet组件</span></span><br><span class="line">        zhangsan.setPet(pet());</span><br><span class="line">        <span class="keyword">return</span> zhangsan;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#############################Conditional测试代码#####################################################</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;com.tao&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1. 返回IOC容器</span></span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">run</span> <span class="operator">=</span> SpringApplication.run(ManApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//7. 判断配置类(组件)中 是否包含某个组件</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">tomcat</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;容器中的tomcat组件:&quot;</span>+ tomcat);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">tomcat22</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;tomcat22&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;容器中的tomcat22组件:&quot;</span>+ tomcat22);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">user01</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;user01&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;容器中的user01组件:&quot;</span>+ user01);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="原生配置-xml-导入"><a href="#原生配置-xml-导入" class="headerlink" title="原生配置(xml)导入"></a>原生配置(xml)导入</h2><h3 id="ImportResource"><a href="#ImportResource" class="headerlink" title="@ImportResource"></a><strong>@ImportResource</strong></h3><p>原生配置:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;test01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tao.boot.entity.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;测试名称&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pet&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;test02&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;test02&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tao.boot.entity.Pet&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;黄术&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>导入并测试:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource(&quot;classpath:beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">=============测试===================</span><br><span class="line"><span class="type">boolean</span> <span class="variable">test01</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;test01&quot;</span>);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">test02</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;test02&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;test01:&quot;</span> + test01);</span><br><span class="line">System.out.println(<span class="string">&quot;test02:&quot;</span> + test02);</span><br></pre></td></tr></table></figure>
<h2 id="配置绑定"><a href="#配置绑定" class="headerlink" title="配置绑定"></a>配置绑定</h2><p>如何使用Java读取到properties文件中的内容，并且把它封装到JavaBean中，以供随时使用；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getProperties</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">         <span class="type">Properties</span> <span class="variable">pps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">         pps.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;a.properties&quot;</span>));</span><br><span class="line">         <span class="type">Enumeration</span> <span class="variable">enum1</span> <span class="operator">=</span> pps.propertyNames();<span class="comment">//得到配置文件的名字</span></span><br><span class="line">         <span class="keyword">while</span>(enum1.hasMoreElements()) &#123;</span><br><span class="line">             <span class="type">String</span> <span class="variable">strKey</span> <span class="operator">=</span> (String) enum1.nextElement();</span><br><span class="line">             <span class="type">String</span> <span class="variable">strValue</span> <span class="operator">=</span> pps.getProperty(strKey);</span><br><span class="line">             System.out.println(strKey + <span class="string">&quot;=&quot;</span> + strValue);</span><br><span class="line">             <span class="comment">//封装到JavaBean。</span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>car实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tao.boot.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String brand, Double price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrand</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Double price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;brand=&#x27;&quot;</span> + brand + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在application.properties中配置实体类的几个字段</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">car.brand</span>=<span class="string">BYD</span></span><br><span class="line"><span class="attr">car.price</span>=<span class="string">100000</span></span><br></pre></td></tr></table></figure>
<h3 id="ConfigurationProperties-Component"><a href="#ConfigurationProperties-Component" class="headerlink" title="@ConfigurationProperties + @Component"></a>@ConfigurationProperties + @Component</h3><p>在需要 Properties 的实体类上加上<br>先加上 @Component注册到IOC容器中成为组件，才能使用SpringBoot提供的功能<br>使用前@ConfigurationProperties，需要先指定配置前缀(属性 prefix) </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=========================配置绑定==================================</span></span><br><span class="line">	<span class="meta">@Component</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;car&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String brand;</span><br><span class="line">        <span class="keyword">private</span> Double price;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">()</span> &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String brand, Double price)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.brand = brand;</span><br><span class="line">            <span class="built_in">this</span>.price = price;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> brand;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrand</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.brand = brand;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Double <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> price;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Double price)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.price = price;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;brand=&#x27;&quot;</span> + brand + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//=========================测试代码==================================</span></span><br><span class="line">    <span class="meta">@RestController</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Car car;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getCar&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Car <span class="title function_">car</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> car;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="EnableConfigurationProperties-ConfigurationProperties"><a href="#EnableConfigurationProperties-ConfigurationProperties" class="headerlink" title="@EnableConfigurationProperties + @ConfigurationProperties"></a>@EnableConfigurationProperties + @ConfigurationProperties</h3><p>用springboot开发的过程中，我们会用到**@ConfigurationProperties<strong>注解，主要是用来把<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=properties&spm=1001.2101.3001.7020">properties</a>或者yml配置文件转化为bean来使用的，而</strong>@EnableConfigurationProperties**注解的作用是@ConfigurationProperties注解生效。<br>如果只配置@ConfigurationProperties注解，在<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=IOC&spm=1001.2101.3001.7020">IOC</a>容器中是获取不到properties配置文件转化的bean的，当然在@ConfigurationProperties加入注解的类上加@Component也可以使交于springboot管理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=============配置绑定==================</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;car&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> Double price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String brand, Double price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrand</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Double price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;brand=&#x27;&quot;</span> + brand + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1、开启Car配置绑定功能</span></span><br><span class="line"><span class="comment">//2、把这个Car这个组件自动注册到容器中</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(Car.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="自动配置入门"><a href="#自动配置入门" class="headerlink" title="自动配置入门"></a>自动配置入门</h1><h2 id="引导加载自动配置类"><a href="#引导加载自动配置类" class="headerlink" title="引导加载自动配置类"></a>引导加载自动配置类</h2><h3 id="SpringBootConfiguration-SpringBoot配置"><a href="#SpringBootConfiguration-SpringBoot配置" class="headerlink" title="@SpringBootConfiguration(SpringBoot配置)"></a>@SpringBootConfiguration(SpringBoot配置)</h3><p>标注是一个配置类<br>它是 @Configuration 注解的派生类注解<br>它与 @Configuration 注解功能一致<br>区别在于 @Configuration  是Spring 的注解 而@SpringBootConfiguration是SpringBoot的注解</p>
<h3 id="ComponentScan-组件扫描"><a href="#ComponentScan-组件扫描" class="headerlink" title="@ComponentScan(组件扫描)"></a>@ComponentScan(组件扫描)</h3><p>@Component 注解及其衍生注解 @RestController、@Controller、@Service、@Repository 都是组件注册注解<br>@ComponentScan 注解主要是从约定的扫描路径中，识别标注了组件注册注解的类，并且把这些类注入到IOC容器中去，这些类就是 Spring 中的bean<br>@Component 也会被IOC容器所托管</p>
<blockquote>
<p><strong>组件扫描路径</strong><br>注解@ComponentScan 如果不设置value属性，默认扫描路径是启动类 XxxApplication.java 所在目录及其子目录，所以最好还是配置value属性，减少加载时间，提高系统启动速度。<br>比如启动类在包 com.test.web下面，那么项目启动时，会默认扫描web包及其子包下的所有类。也就是说，即便不明确标注@ComponentScan，Spring Boot也会自动搜索当前应用主入口目录及其下方子目录。如果其它包中的bean 不在当前主包路径下面，则应使用@ComponentScan设置value属性，配置扫描路径。如果定义了错误的扫描路径，那么在使用注解@Autowired自动装配Bean时会出错，报a bean of type that could not be found错误。</p>
</blockquote>
<blockquote>
<p><strong>配置扫描路径</strong><br>@ComponentScan注解既可以扫描包，也可以扫描指定的类。我们只需要指定一个需要扫描的路径，就可以达到更改扫描路径的目的。</p>
<ol>
<li>包扫描</li>
</ol>
</blockquote>
<p>通过value属性设置需要扫描bean的包</p>
<blockquote>
<p> @ComponentScan({“com.test.mapper”,”com.test.service”})<br>2. 类扫描</p>
</blockquote>
<p>通过basePackageClasses属性指定需要扫描的类</p>
<blockquote>
<p>@ComponenScan(basePackageClasses&#x3D;{xxxxMapper.class,xxxxController.class})</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626268527765-d5dff7d8-1e47-4126-9e2c-9a77b57edd8a.png#crop=0&crop=0&crop=1&crop=1&from=url&id=OrRYX&margin=%5Bobject%20Object%5D&originHeight=713&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="></p>
<h3 id="EnableAutoConfiguration-启用自动配置"><a href="#EnableAutoConfiguration-启用自动配置" class="headerlink" title="@EnableAutoConfiguration(启用自动配置)"></a>@EnableAutoConfiguration(启用自动配置)</h3><p>指定了默认的包规则</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import(AutoConfigurationImportSelector.class)</span></span><br></pre></td></tr></table></figure>
<h4 id="AutoConfigurationPackage"><a href="#AutoConfigurationPackage" class="headerlink" title="@AutoConfigurationPackage"></a>@AutoConfigurationPackage</h4><p>自动配置包，指定了默认的包规则</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(Registrar.class)</span>  <span class="comment">//给容器中导入一个组件</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用Registrar给容器中导入一系列组件</span></span><br><span class="line"><span class="comment">//将指定的一个包下的所有组件导入进来？xxxApplication.java 所在包下。</span></span><br></pre></td></tr></table></figure>
<p>@AutoConfigurationPackage注解是指定了默认的包规则，即在该包下的组件才可以被Springboot扫描后自动装配(注册)进IOC容器中。<br>使用@import将AutoConfigurationPackages包下的Registrar类作为组件导入到容器中，然后使用Registrar中的方法批量完成组件的注册。</p>
<ol>
<li>进入 源码后 Registrar.class debug  registerBeanDefinitions 中去</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666868752103-b95602c0-6ddb-46dc-8c80-23b65ea161d0.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=217&id=uc2672127&margin=%5Bobject%20Object%5D&name=image.png&originHeight=271&originWidth=1214&originalType=binary&ratio=1&rotation=0&showTitle=false&size=47272&status=done&style=none&taskId=u9600d8b6-cd5e-489a-b81f-ac0525476ec&title=&width=971.2" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666868858807-01c7f193-ca9c-4b6d-ab05-879690240ed8.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=188&id=u9efd27a9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=235&originWidth=1034&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35314&status=done&style=none&taskId=u70083e45-2b2e-442c-ae46-eb552c47663&title=&width=827.2" alt="image.png"></p>
<ol start="2">
<li>IDEA ctrl + f8 可以知道 new PackageImports(metadata).getPackageNames() 对应的值是  com.tao.boot 包</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666868936795-08885f76-27b8-41a0-9b7d-a300949a1513.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=586&id=u4aab18c2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=733&originWidth=592&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28382&status=done&style=none&taskId=u776a31e3-4fc1-449e-a374-adc28474447&title=&width=473.6" alt="image.png"></p>
<ol start="3">
<li>所以可以说明 @AutoConfigurationPackage 会被SpringBoot自动扫描指定包(如果没有指定会使用默认扫描xxxApplication.java同级包下所有的bean)路径下的所有bean 并注册到IOC容器中</li>
</ol>
<h4 id="Import-AutoConfigurationImportSelector-class"><a href="#Import-AutoConfigurationImportSelector-class" class="headerlink" title="@Import(AutoConfigurationImportSelector.class)"></a>@Import(AutoConfigurationImportSelector.class)</h4><p>先理解源码怎么来的！！！</p>
<ol>
<li>先进入 AutoConfigurationImportSelector.class 类中</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666870466531-88370e94-d364-4e5c-8da7-312ed4cfb7b5.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=266&id=u5802faf9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=333&originWidth=1171&originalType=binary&ratio=1&rotation=0&showTitle=false&size=62035&status=done&style=none&taskId=ue30dd796-b54e-46c1-9fb2-871379862fc&title=&width=936.8" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666870879393-d3d98aed-7148-4f7e-8dcd-b4d6007208e6.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=300&id=u130a2b42&margin=%5Bobject%20Object%5D&name=image.png&originHeight=375&originWidth=1274&originalType=binary&ratio=1&rotation=0&showTitle=false&size=119746&status=done&style=none&taskId=u18710aa1-471d-42ce-ba56-12a02ba6f1a&title=&width=1019.2" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871008030-1bd72b83-8090-4539-afcb-122a5713457e.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=387&id=u8fe69615&margin=%5Bobject%20Object%5D&name=image.png&originHeight=484&originWidth=1221&originalType=binary&ratio=1&rotation=0&showTitle=false&size=120042&status=done&style=none&taskId=u76384ddf-efb6-4420-b150-ec924f83b24&title=&width=976.8" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871259108-229a1631-e51f-48ec-82ad-34bb44b5d1bb.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=312&id=u702497de&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1252&originalType=binary&ratio=1&rotation=0&showTitle=false&size=113404&status=done&style=none&taskId=ue38002c5-9ae9-495e-af66-728e17856d1&title=&width=1001.6" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871350226-8ba0618f-bc71-41e0-88d7-d48b563026ab.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=304&id=u5a019c5f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=380&originWidth=1266&originalType=binary&ratio=1&rotation=0&showTitle=false&size=99365&status=done&style=none&taskId=uc6e1e54e-35cf-439a-a909-95a1b2da080&title=&width=1012.8" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666871465110-5af13936-fc02-4f51-b55f-4f9f088a4a43.png#clientId=u09a8ab18-3581-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=630&id=ua1a4048b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=788&originWidth=1613&originalType=binary&ratio=1&rotation=0&showTitle=false&size=252590&status=done&style=none&taskId=u8cf06abe-60d9-47e6-a997-20c197fa576&title=&width=1290.4" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666911522276-34b784fa-0006-4a15-96eb-e3c568e1f81f.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=182&id=u4b6c5cc2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=228&originWidth=1016&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33305&status=done&style=none&taskId=u20af8b8f-e050-4bb0-9d88-ea7293dde9f&title=&width=812.8" alt="image.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、利用getAutoConfigurationEntry(annotationMetadata);给容器中批量导入一些组件</span><br><span class="line"><span class="number">2</span>、调用List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes)获取到所有需要导入到容器中的配置类</span><br><span class="line"><span class="number">3</span>、利用工厂加载 Map&lt;String, List&lt;String&gt;&gt; <span class="title function_">loadSpringFactories</span><span class="params">(<span class="meta">@Nullable</span> ClassLoader classLoader)</span>；得到所有的组件</span><br><span class="line"><span class="number">4</span>、从META-INF/spring.factories位置来加载一个文件。</span><br><span class="line">	默认扫描我们当前系统里面所有META-INF/spring.factories位置的文件</span><br><span class="line">    spring-boot-autoconfigure-<span class="number">2.3</span><span class="number">.4</span>.RELEASE.jar包里面也有META-INF/spring.factories</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<h2 id="按需开始自动配置项"><a href="#按需开始自动配置项" class="headerlink" title="按需开始自动配置项"></a>按需开始自动配置项</h2><p>虽然我们有100多个场景1所有自动配置启动的时候默认全部加载。xxxAutoConfiguration<br>按照条件装配规则(.@Conditional )，最终会按需配置</p>
<h2 id="修改默认配置"><a href="#修改默认配置" class="headerlink" title="修改默认配置"></a>修改默认配置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(MultipartResolver.class)</span> <span class="comment">//从IOC容器中找是否有这个类型组件</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)</span><span class="comment">// 从IOC容器中找是否有 名为  multipartResolver  的组件</span></span><br><span class="line"><span class="keyword">public</span> MultipartResolver <span class="title function_">multipartResolver</span><span class="params">(MultipartResolver resolver)</span> &#123;</span><br><span class="line">    <span class="comment">//给@Bean标注的方式传入了对象参数，这个参数就会去容器中找</span></span><br><span class="line">    <span class="comment">//Spring MVC MultipartResolver 防止有些用户配置文件上传解析器不符合规范</span></span><br><span class="line">   <span class="comment">// Detect if the user has created a MultipartResolver but named it incorrectly</span></span><br><span class="line">   <span class="keyword">return</span> resolver;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在容器中加入了文件上传解析器</span></span><br></pre></td></tr></table></figure>
<p>Spring Boot 默认会在底层配好所有组件。但是如果用户自己配置了组件，那就以用户的为先</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line"><span class="keyword">public</span> CharacterEncodingFilter <span class="title function_">characterEncodingFilter</span><span class="params">()</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>总结：</p>
<ul>
<li>Spring Boot 先加载所有的自动配置类 xxxxAutoCongiguration</li>
<li>每个自动配置类按照条件进行生效，默认绑定配置文件指定的值 。</li>
</ul>
<p> @EnableConfigurationProperties(xxxxProperties.class) 这些配置文件的值都是从 xxxx Properties.class 中去拿<br><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666915986334-1305b95c-e17a-4d20-a33a-d7ee464bc7ca.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=413&id=u6053a2f9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=794&originWidth=1485&originalType=binary&ratio=1&rotation=0&showTitle=false&size=205073&status=done&style=none&taskId=u94598d01-e404-43c0-a327-2f3ce58147c&title=&width=773" alt="image.png"></p>
<ul>
<li>生效的配置类就会给容器中装配很多的组件</li>
<li>只要容器中有这些组件，相当于这些功能就有了</li>
<li>只要用户有自己配置的，那么就以用户的优先<ul>
<li>定制化配置<ul>
<li><p>用户自己直接 使用@Bean替换底层的组件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ServerProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCharset</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Encoding properties;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCharset</span><span class="params">(ServerProperties properties)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.properties = properties.getServlet().getEncoding();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CharacterEncodingFilter <span class="title function_">characterEncodingFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">filter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        filter.setEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        filter.setForceRequestEncoding(<span class="built_in">this</span>.properties.shouldForce(Encoding.Type.REQUEST));</span><br><span class="line">        filter.setForceResponseEncoding(<span class="built_in">this</span>.properties.shouldForce(Encoding.Type.RESPONSE));</span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>xxxxxAutoConfiguration —&gt; 自己定义的Bean里面拿值</strong></p>
</li>
<li><p>用户去看这个组件获取的配置文件实某些值，去Spring Boot(application.properties)文件中修改这些值</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.servlet.encoding.charset</span>=<span class="string">utf-8</span></span><br></pre></td></tr></table></figure>
<p><strong>xxxxxAutoConfiguration —&gt; 组件 —&gt; xxxxProperties里面拿值 —-&gt; application.properties</strong></p>
<h2 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h2><ul>
<li>引入场景依赖<ul>
<li>去网上查找</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters">官网查找</a></li>
</ul>
</li>
<li>查看自动配置了哪些（选做）<ul>
<li>自己分析，引入的场景对应的自动配置一般都生效了</li>
<li>配置文件(application.properties)中开启debug&#x3D;true 在 输出中有 Negative（不生效）\Positive（生效）</li>
</ul>
</li>
<li>是否需要修改<ul>
<li>参照文档修改配置项<ul>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties">官网查找</a></li>
<li>自己分析， xxxx Properties绑定的配置文件有哪些配置项</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666919619649-a9b5d9ad-171d-4580-be55-8e8f983dc7e0.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=41&id=ud917beb6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=51&originWidth=817&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11483&status=done&style=none&taskId=u8b3d7f34-d0e1-4dd1-81f8-31a7828a7c0&title=&width=653.6" alt="image.png"></p>
<ul>
<li>自定义加入或者替换组件<ul>
<li>使用 @Bean 、@Configuration 、….自定义配置</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/26751161/1666919663152-81f7e254-3d99-458b-a729-b13a3fc35b9a.png#clientId=uf83bcc22-58a9-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=504&id=u61270335&margin=%5Bobject%20Object%5D&name=image.png&originHeight=630&originWidth=1179&originalType=binary&ratio=1&rotation=0&showTitle=false&size=106589&status=done&style=none&taskId=u41ce6d89-16ed-43fe-b399-09c3b7fec6e&title=&width=943.2" alt="image.png"></p>
<ul>
<li>自定义器 xxxxCustomizer</li>
</ul>
<h1 id="简化开发"><a href="#简化开发" class="headerlink" title="简化开发"></a>简化开发</h1>
      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://example.com/2022/10/28/SpringBoot2%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%85%A5%E9%97%A8/" title="SpringBoot2自动配置入门" target="_blank" rel="external">http://example.com/2022/10/28/SpringBoot2自动配置入门/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/cofess" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/20221028171523.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/cofess" target="_blank"><span class="text-dark">Epiphany</span><small class="ml-1x">Web Developer &amp; Designer</small></a></h3>
        <div>个人简介。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2022/10/28/Spring%20Boot%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" title="Spring Boot 配置文件"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    
    <li class="toggle-toc">
      <a class="toggle-btn " data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">    <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle=tooltip data-placement=top><i class="icon icon-behance"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     



  <script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script>
  <script>
  //利用 FancyBox 实现点击图片放大
  $(document).ready(function() {
    $('article img').not('[hidden]').not('.panel-body img').each(function() {
      var $image = $(this);
      var imageCaption = $image.attr('alt');
      var $imageWrapLink = $image.parent('a');
      if ($imageWrapLink.length < 1) {
        var src = this.getAttribute('src');
        var idx = src.lastIndexOf('?');
        if (idx != -1) {
          src = src.substring(0, idx);
        }
        $imageWrapLink = $image.wrap('<a href="' + src + '"></a>').parent('a');
      }
      $imageWrapLink.attr('data-fancybox', 'images');
      if (imageCaption) {
        $imageWrapLink.attr('data-caption', imageCaption);
      }
    });
    $().fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
    });
  });
  </script>





</body>
</html>